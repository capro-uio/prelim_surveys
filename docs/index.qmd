---
title: "Survey reports for CAPRO core facility application"
format: 
  html:
    theme: capro-quarto.scss
editor: visual
---

```{r}
#| include: false
#| label: setup

extract_title <- function(html) {
  header <- readLines(html, 40)
  title_match <- regmatches(
    header,
    regexpr(
      "<title[^>]*>(.*?)</title>",
      header,
      ignore.case = TRUE,
      perl = TRUE
    )
  )
  if (length(title_match) == 0) {
    return(NA)
  }
  gsub("</?title[^>]*>", "", title_match, ignore.case = TRUE)
}

make_html_list <- function(text, url) {
  sprintf("<li><a href='%s'>%s</a></li>", url, text)
}
```

<ul>

```{r}
#| echo: false
#| results: asis
files <- list.files(
  here::here("docs"),
  "html",
  full.names = TRUE
)
titles <- sapply(files, extract_title, USE.NAMES = FALSE)

make_html_list(titles, basename(files)) |>
  cat(sep = "\n")
```

</ul>

[![](logo.svg){width="300"}](www.capro.dev)